<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hw.mapper.PermissionMapper">

    <select id="findPermissionListByUserId" resultType="com.hw.entity.Permission">
        SELECT DISTINCT
            sp.id,sp.parent_id,sp.label,sp.code,sp.url,sp.type,sp.icon,sp.remark,sp.path,sp.name
        FROM
            sys_user su
                LEFT JOIN sys_user_role sur ON sur.user_id = su.id
                LEFT JOIN sys_role sr ON sr.id = sur.role_id
                LEFT JOIN sys_role_permission srp ON srp.role_id = sr.id
                LEFT JOIN sys_permission sp ON sp.id = srp.permission_Id
        WHERE su.id =#{userId}
        ORDER BY sp.id ASC
    </select>
</mapper>
